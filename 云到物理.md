#混合云方案

---

##混合云转物理机

####拥抱变化,无处不在的变更

我们初期的网站程序会随着需求不停的变更,我们在一段时间内很难界定我们网站具体的需求容量.而随着需求在初期的不确定性,我们对于服务器的容量也会有部确定性.

而部署物理机因为扩容的能力较差,我们初期需要`一定的时间`由`dev`和`ops`一起来确定我们对于服务器的容量.好能按需购置我们的服务器.

在云端我们可以不用这么纠结于初期服务器的容量,我们随时可以灵活的变更.而等待网站功能趋于稳定我们在根据最终的需求转向云端.

这样我们可以把`变更的风险`把控在开发之中,在后期趋于稳定再次确认物理机的配置需求.减少后期的变更成本.

####数据线下,程序云端

对于网站,数据保密性是高要求的,但是程序就没有那么的苛刻了.

数据库线下,程序云端方案.我们即可以做到数据的保密性,也可以动态调整我们程序在云端的部署.按需配置.

####云端到线下,弹指之间

因为我们整体网站的架构使用了`容器(docker)`,有别于传统的代码部署方式,`只是部署代码`,我们是部署`环境+代码`.

所以我们在从线上转到线下几乎可以是零成本的转移,而只需对`附件`和一些`数据`做迁移即可.程序部分因为我们是连同环境一起转移,所以我们不用考虑环境的不一致性.

可以做到`快速`转移.

####搭建环境时间

物理机搭建初期,需要`提前一段时间`做容量测试.按需购买服务器.并且需要运维提前入场,做好初期服务器搭建设计.

所有CI/CD的搭建需要`等待服务器确认`好后才能部署.

**数据库准备**

需要搭建`mysql`集群(高可用),使用容器or不使用

需要搭建`mongodb`集群(高可用),使用容器or不使用

需要搭建`redis`集群(高可用),使用容器or不使用

**CI/CD**

持续集成和持续部署,搭建微服务的框架.

1. 可以招专门的运维工程师去处理
2. 我可以处理

**时间规划**

1. 持续集成环境搭建: `1个半月`(云端)
	* 开发环境自动化部署
	* 自动化测试
	* 构建测试流水线
	* 构建代码镜像仓库
	* 构建mysql(高可用)自动化脚本
	* 构建redis(高可用)自动化脚本 
	* 构建mongo(高可用)自动化脚本
	* 程序框架
	* 队列高可用服务 
	* jenkins
	* redmine自动化脚本
	* 日志服务自动化脚本
2. 如果是物理机,需要先确定好我们所需服务器的容量,内存,带宽和硬盘这些需求以后.需要运维和开发人员一起确定服务器数量和搭配,因为里面涉及到各种不同语言不同服务的搭建.在进行搭建.因为后期可扩容性太低.如果人齐了,则需要:
	* 运维工程师和开发团队搭建CI/CD
	* 开发工程师搭建CI/CD
